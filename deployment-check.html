<!DOCTYPE html>
<html>
<head>
    <title>Deployment Check</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .status { padding: 20px; border-radius: 8px; margin: 20px 0; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .pending { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>🚀 PhotoBooth Deployment Status</h1>
    <div id="status" class="status pending">⏳ Checking deployment...</div>
    <div id="details"></div>
    
    <h2>🔗 Quick Links</h2>
    <ul>
        <li><a href="https://kaushikasemwal.github.io/vintage-photobooth/" target="_blank">🎪 PhotoBooth (Main)</a></li>
        <li><a href="https://kaushikasemwal.github.io/vintage-photobooth/firebase-test.html" target="_blank">🔥 Firebase Test</a></li>
    </ul>
    
    <h2>📋 What to Test</h2>
    <ol>
        <li><strong>Open PhotoBooth</strong> - Check for syntax errors in console</li>
        <li><strong>Create Session</strong> - Start collaborative session</li>
        <li><strong>Open Second Tab</strong> - Join the session with code</li>
        <li><strong>Take Photos</strong> - Look for debugging messages in console</li>
        <li><strong>Check Real-time</strong> - Photos should appear in both tabs</li>
    </ol>

    <script>
        function checkDeployment() {
            fetch('https://kaushikasemwal.github.io/vintage-photobooth/script.js?t=' + Date.now())
                .then(response => response.text())
                .then(data => {
                    const statusEl = document.getElementById('status');
                    const detailsEl = document.getElementById('details');
                    
                    // Check for our latest fix
                    if (data.includes('📸 Attempting to share photo with session')) {
                        statusEl.className = 'status success';
                        statusEl.innerHTML = '✅ Latest fixes deployed successfully!';
                        detailsEl.innerHTML = `
                            <div class="status success">
                                <h3>🎉 Deployment Confirmed</h3>
                                <p>✅ Firebase collaboration debugging found</p>
                                <p>✅ Photo sharing functions updated</p>
                                <p>✅ Syntax errors fixed</p>
                                <p><strong>Your PhotoBooth is ready for testing!</strong></p>
                            </div>
                        `;
                    } else {
                        statusEl.className = 'status pending';
                        statusEl.innerHTML = '⏳ Deployment still in progress...';
                        detailsEl.innerHTML = `
                            <div class="status pending">
                                <p>GitHub Pages is still deploying your changes.</p>
                                <p>This usually takes 1-5 minutes.</p>
                                <p><button onclick="checkDeployment()">🔄 Check Again</button></p>
                            </div>
                        `;
                    }
                })
                .catch(error => {
                    document.getElementById('status').className = 'status error';
                    document.getElementById('status').innerHTML = '❌ Error checking deployment';
                    document.getElementById('details').innerHTML = `
                        <div class="status error">
                            <p>Error: ${error.message}</p>
                            <p><button onclick="checkDeployment()">🔄 Try Again</button></p>
                        </div>
                    `;
                });
        }
        
        // Check immediately and then every 30 seconds
        checkDeployment();
        setInterval(checkDeployment, 30000);
    </script>
</body>
</html>